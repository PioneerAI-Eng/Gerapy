{"version":3,"sources":["webpack:///src/views/task/src/views/task/Substance.vue","chunk-47806589.a8bdc9c2.css","webpack:///src/views/task/src/views/task/Edit.vue"],"names":[],"mappings":"AAuQA,0CACA,WCrQA,CCuDA,WACA,WDnDA,CCsDA,WACA,WDpDA","file":"chunk-47806589.a8bdc9c2.css","sourcesContent":["<template>\n\t<el-form ref=\"form\" :model=\"formData\" :rules=\"rules\" label-width=\"100px\">\n\t\t<el-form-item :label=\"$lang.columns.name\" prop=\"name\">\n\t\t\t<el-input v-model=\"formData.name\"\n\t\t\t\t\t\t\t\t:placeholder=\"$lang.messages.enter + ' ' + $lang.columns.name\"\n\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t</el-form-item>\n\t\t<el-form-item :label=\"$lang.columns.clients\" prop=\"clients\">\n\t\t\t<el-select v-model=\"formData.clients\" multiple :placeholder=\"$lang.messages.select\"\n\t\t\t\t\t\t\t\t size=\"small\">\n\t\t\t\t<el-option\n\t\t\t\t\tv-for=\"item in clientOptions\"\n\t\t\t\t\t:key=\"item.value\"\n\t\t\t\t\t:label=\"item.label\"\n\t\t\t\t\t:value=\"item.value\">\n\t\t\t\t</el-option>\n\t\t\t</el-select>\n\t\t</el-form-item>\n\t\t<el-form-item :label=\"$lang.columns.project\" prop=\"project\">\n\t\t\t<el-input v-model=\"formData.project\"\n\t\t\t\t\t\t\t\t:placeholder=\"$lang.messages.enter + ' ' + $lang.columns.project\"\n\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t</el-form-item>\n\t\t<el-form-item :label=\"$lang.columns.spider\" prop=\"spider\">\n\t\t\t<el-input v-model=\"formData.spider\"\n\t\t\t\t\t\t\t\t:placeholder=\"$lang.messages.enter + ' ' + $lang.columns.spider\"\n\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t</el-form-item>\n\t\t<el-form-item :label=\"$lang.columns.trigger\" prop=\"trigger\">\n\t\t\t<el-select v-model=\"formData.trigger\" :placeholder=\"$lang.messages.select\" size=\"small\">\n\t\t\t\t<el-option\n\t\t\t\t\tv-for=\"item in triggerOptions\"\n\t\t\t\t\t:key=\"item.value\"\n\t\t\t\t\t:label=\"item.label\"\n\t\t\t\t\t:value=\"item.value\">\n\t\t\t\t</el-option>\n\t\t\t</el-select>\n\t\t</el-form-item>\n\t\t<div v-if=\"formData.trigger === 'date'\">\n\t\t\t<el-form-item :label=\"$lang.columns.runDate\">\n\t\t\t\t<el-date-picker v-model=\"formData.configuration.run_date\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"datetime\" size=\"small\" :picker-options=\"dateOptions\"\n\t\t\t\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.descriptions.chooseDateTime\">\n\t\t\t\t</el-date-picker>\n\t\t\t\t<el-input v-model=\"formData.configuration.timezone\"\n\t\t\t\t\t\t\t\t\tclass=\"inline width-100\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.columns.timezone\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t\t</el-form-item>\n\t\t</div>\n\t\t<div v-if=\"formData.trigger === 'interval'\">\n\t\t\t<el-form-item :label=\"$lang.columns.runDate\">\n\t\t\t\t<el-input v-model.number=\"formData.configuration.weeks\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.columns.weeks\"\n\t\t\t\t\t\t\t\t\tclass=\"inline width-100\" type=\"number\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t\t\t<el-input v-model.number=\"formData.configuration.days\"\n\t\t\t\t\t\t\t\t\tclass=\"inline width-100\" type=\"number\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.columns.days\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t\t\t<el-input v-model.number=\"formData.configuration.hours\"\n\t\t\t\t\t\t\t\t\tclass=\"inline width-100\" type=\"number\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.columns.hours\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t\t\t<el-input v-model.number=\"formData.configuration.minutes\"\n\t\t\t\t\t\t\t\t\tclass=\"inline width-100\" type=\"number\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.columns.minutes\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t\t\t<el-input v-model.number=\"formData.configuration.seconds\"\n\t\t\t\t\t\t\t\t\tclass=\"inline width-100\" type=\"number\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.columns.seconds\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t\t\t<el-input v-model=\"formData.configuration.timezone\"\n\t\t\t\t\t\t\t\t\tclass=\"inline width-100\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.columns.timezone\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t\t\t<el-date-picker\n\t\t\t\t\tv-model=\"formData.configuration.start_date\"\n\t\t\t\t\ttype=\"datetime\" size=\"small\" :picker-options=\"dateOptions\"\n\t\t\t\t\t:placeholder=\"$lang.columns.startDate\">\n\t\t\t\t</el-date-picker>\n\t\t\t\t<el-date-picker\n\t\t\t\t\tv-model=\"formData.configuration.end_date\" :picker-options=\"dateOptions\"\n\t\t\t\t\ttype=\"datetime\" size=\"small\"\n\t\t\t\t\t:placeholder=\"$lang.columns.endDate\">\n\t\t\t\t</el-date-picker>\n\t\t\t</el-form-item>\n\t\t</div>\n\t\t<div v-if=\"formData.trigger==='cron'\">\n\t\t\t<el-form-item :label=\"$lang.columns.runDate\">\n\t\t\t\t<el-input v-model=\"formData.configuration.year\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.columns.year\"\n\t\t\t\t\t\t\t\t\tclass=\"inline width-100\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t\t\t<el-input v-model=\"formData.configuration.month\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.columns.month\"\n\t\t\t\t\t\t\t\t\tclass=\"inline width-100\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t\t\t<el-input v-model=\"formData.configuration.day\"\n\t\t\t\t\t\t\t\t\tclass=\"inline width-100\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.columns.day\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t\t\t<el-input v-model=\"formData.configuration.week\"\n\t\t\t\t\t\t\t\t\tclass=\"inline width-100\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.columns.week\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t\t\t<el-input v-model=\"formData.configuration.day_of_week\"\n\t\t\t\t\t\t\t\t\tclass=\"inline width-100\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.columns.dayOfWeek\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t\t\t<el-input v-model=\"formData.configuration.hour\"\n\t\t\t\t\t\t\t\t\tclass=\"inline width-100\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.columns.hour\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t\t\t<el-input v-model=\"formData.configuration.minute\"\n\t\t\t\t\t\t\t\t\tclass=\"inline width-100\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.columns.minute\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t\t\t<el-input v-model=\"formData.configuration.second\"\n\t\t\t\t\t\t\t\t\tclass=\"inline width-100\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.columns.second\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t\t\t<el-input v-model=\"formData.configuration.timezone\"\n\t\t\t\t\t\t\t\t\tclass=\"inline width-100\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$lang.columns.timezone\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"></el-input>\n\t\t\t\t<el-date-picker\n\t\t\t\t\tv-model=\"formData.configuration.start_date\"\n\t\t\t\t\ttype=\"datetime\" size=\"small\" :picker-options=\"dateOptions\"\n\t\t\t\t\t:placeholder=\"$lang.columns.startDate\">\n\t\t\t\t</el-date-picker>\n\t\t\t\t<el-date-picker\n\t\t\t\t\tv-model=\"formData.configuration.end_date\" :picker-options=\"dateOptions\"\n\t\t\t\t\ttype=\"datetime\" size=\"small\"\n\t\t\t\t\t:placeholder=\"$lang.columns.endDate\">\n\t\t\t\t</el-date-picker>\n\t\t\t</el-form-item>\n\t\t</div>\n\t\t<div>\n\t\t\t<el-form-item>\n\t\t\t\t<slot name=\"submit\"></slot>\n\t\t\t\t<el-button @click=\"$router.back()\" size=\"small\">\n\t\t\t\t\t<i class=\"fa fa-reply\"></i>\n\t\t\t\t\t{{ $lang.buttons.return }}\n\t\t\t\t</el-button>\n\t\t\t</el-form-item>\n\t\t</div>\n\t</el-form>\n</template>\n\n<script>\n\texport default {\n\t\tname: 'Substance',\n\t\tprops: {\n\t\t\tid: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: null\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tformData: {\n\t\t\t\t\tname: null,\n\t\t\t\t\tclients: [],\n\t\t\t\t\ttrigger: null,\n\t\t\t\t\tproject: null,\n\t\t\t\t\tspider: null,\n\t\t\t\t\tconfiguration: {\n\t\t\t\t\t\trun_date: null,\n\t\t\t\t\t\tweeks: null,\n\t\t\t\t\t\tdays: null,\n\t\t\t\t\t\thours: null,\n\t\t\t\t\t\tminutes: null,\n\t\t\t\t\t\tseconds: null,\n\t\t\t\t\t\tmonth: null,\n\t\t\t\t\t\tweek: null,\n\t\t\t\t\t\tday: null,\n\t\t\t\t\t\thour: null,\n\t\t\t\t\t\tminute: null,\n\t\t\t\t\t\tsecond: null,\n\t\t\t\t\t\tyear: null,\n\t\t\t\t\t\tday_of_week: null,\n\t\t\t\t\t\ttimezone: null,\n\t\t\t\t\t\tstart_date: null,\n\t\t\t\t\t\tend_date: null,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tclientOptions: [],\n\t\t\t\tdateOptions: {\n\t\t\t\t\tdisabledDate(time) {\n\t\t\t\t\t\treturn time.getTime() < Date.now() - 8.64e7\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trules: {\n\t\t\t\t\tname: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tmessage: this.$store.getters.$lang.columns.name + ' ' + this.$store.getters.$lang.messages.isNull,\n\t\t\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tproject: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tmessage: this.$store.getters.$lang.columns.project + ' ' + this.$store.getters.$lang.messages.isNull,\n\t\t\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tspider: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tmessage: this.$store.getters.$lang.columns.spider + ' ' + this.$store.getters.$lang.messages.isNull,\n\t\t\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\ttriggerOptions: [{\n\t\t\t\t\tvalue: 'date',\n\t\t\t\t\tlabel: 'Date',\n\t\t\t\t}, {\n\t\t\t\t\tvalue: 'interval',\n\t\t\t\t\tlabel: 'Interval'\n\t\t\t\t}, {\n\t\t\t\t\tvalue: 'cron',\n\t\t\t\t\tlabel: 'Crontab'\n\t\t\t\t}],\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tthis.getClientData()\n\t\t\tthis.getTaskData()\n\t\t},\n\t\tmethods: {\n\t\t\tgetClientData() {\n\t\t\t\tthis.$http.get(this.$store.state.url.client.index\n\t\t\t\t).then(({data: clients}) => {\n\t\t\t\t\tclients.forEach((item) => {\n\t\t\t\t\t\tthis.clientOptions.push({\n\t\t\t\t\t\t\tvalue: item.pk,\n\t\t\t\t\t\t\tlabel: item.fields.name\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.clients = []\n\t\t\t\t\tthis.$message.error(this.$store.getters.$lang.messages.loadError)\n\t\t\t\t})\n\t\t\t},\n\t\t\tgetTaskData() {\n\t\t\t\tif (this.id) {\n\t\t\t\t\tthis.$http.get(this.format(this.$store.state.url.task.info, {\n\t\t\t\t\t\tid: this.id\n\t\t\t\t\t})).then(({data: {data: client}}) => {\n\t\t\t\t\t\tthis.formData = client\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\tthis.$message.error(this.$store.getters.$lang.messages.loadError)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.el-date-editor.el-input {\n\t\twidth: 152px;\n\t}\n</style>\n","\n.el-date-editor.el-input[data-v-67cc2978] {\n\twidth: 152px;\n}\n\n\n.width-100 {\n\twidth: 100px;\n}\n.width-200 {\n\twidth: 200px;\n}\n\n\n/*# sourceMappingURL=chunk-47806589.a8bdc9c2.css.map*/","<template>\n\t<div class=\"panel\">\n\t\t<panel-title :title=\"$lang.titles.createTask\"></panel-title>\n\t\t<div class=\"panel-body\"\n\t\t\t\t v-loading=\"loadData\"\n\t\t\t\t :element-loading-text=\"$lang.messages.loading\">\n\t\t\t<el-row>\n\t\t\t\t<el-col :span=\"10\">\n\t\t\t\t\t<substance ref=\"substance\" :id=\"routeId\">\n\t\t\t\t\t\t<template slot=\"submit\">\n\t\t\t\t\t\t\t<el-button type=\"primary\" size=\"small\" @click=\"onSubmitForm\" :loading=\"onSubmitLoading\">\n\t\t\t\t\t\t\t\t<i class=\"fa fa-check\"></i>\n\t\t\t\t\t\t\t\t{{ $lang.buttons.update }}\n\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</substance>\n\t\t\t\t</el-col>\n\t\t\t</el-row>\n\t\t</div>\n\t</div>\n</template>\n<script type=\"text/javascript\">\n\timport PanelTitle from '../../components/PanelTitle'\n\timport Substance from './Substance'\n\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tonSubmitLoading: false,\n\t\t\t\tloadData: false,\n\t\t\t\trouteId: this.$route.params.id,\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tonSubmitForm() {\n\t\t\t\tthis.$refs.substance.$refs.form.validate((valid) => {\n\t\t\t\t\tif (!valid)\n\t\t\t\t\t\treturn false\n\t\t\t\t\tthis.onSubmitLoading = true\n\t\t\t\t\tlet formData = this.$refs.substance.formData\n\t\t\t\t\tthis.$http.post(this.format(this.$store.state.url.task.update, {\n\t\t\t\t\t\tid: this.routeId\n\t\t\t\t\t}), formData).then(() => {\n\t\t\t\t\t\tthis.$message.success(this.$store.getters.$lang.messages.successSave)\n\t\t\t\t\t\tthis.onSubmitLoading = false\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\tthis.onSubmitLoading = false\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tcomponents: {\n\t\t\tPanelTitle,\n\t\t\tSubstance\n\t\t},\n\t}\n</script>\n<style>\n\t.width-100 {\n\t\twidth: 100px;\n\t}\n\n\t.width-200 {\n\t\twidth: 200px;\n\t}\n</style>\n"]}