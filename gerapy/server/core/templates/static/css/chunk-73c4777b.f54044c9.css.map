{"version":3,"sources":["webpack:///src/views/task/src/views/task/Status.vue","chunk-73c4777b.f54044c9.css"],"names":[],"mappings":"AAiIA,2BACA,eAAA,CACA,aAAA,CACA,YC/HA,CDkIA,uBACA,cAAA,CACA,aChIA","file":"chunk-73c4777b.f54044c9.css","sourcesContent":["<template>\n\t<div>\n\t\t<el-row :gutter=\"20\">\n\t\t\t<el-col :span=\"24\">\n\t\t\t\t<div class=\"panel\">\n\t\t\t\t\t<panel-title :title=\"$lang.objects.task\">\n\t\t\t\t\t</panel-title>\n\t\t\t\t\t<div class=\"panel-body\" v-if=\"task\">\n\t\t\t\t\t\t<div class=\"m-b\">\n\t\t\t\t\t\t\t<el-button type=\"primary\" size=\"mini\">{{ task.trigger }}</el-button>\n\t\t\t\t\t\t\t<span class=\"text\">{{ task.configuration }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"m-b\">\n\t\t\t\t\t\t\t<el-button type=\"primary\" size=\"mini\">\n\t\t\t\t\t\t\t\t{{ $lang.objects.project }}\n\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t<span class=\"text\">{{ task.project }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"m-b\">\n\t\t\t\t\t\t\t<el-button type=\"primary\" size=\"mini\">\n\t\t\t\t\t\t\t\t{{ $lang.objects.spider }}\n\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t<span class=\"text\">{{ task.spider }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</el-col>\n\t\t</el-row>\n\t\t<el-row :gutter=\"20\">\n\t\t\t<el-col :span=\"8\" v-for=\"job in jobs\">\n\t\t\t\t<div class=\"panel\">\n\t\t\t\t\t<panel-title :title=\"$lang.objects.job\">\n\t\t\t\t\t</panel-title>\n\t\t\t\t\t<div class=\"panel-body\" v-loading=\"loadingJob\">\n\t\t\t\t\t\t<div class=\"m-b\">\n\t\t\t\t\t\t\t<el-button type=\"primary\" size=\"mini\" class=\"m-r-xs\">\n\t\t\t\t\t\t\t\t{{ $lang.objects.client }}\n\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t<span class=\"text\">{{ job.client.name }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"m-b\">\n\t\t\t\t\t\t\t<el-button type=\"primary\" size=\"mini\" class=\"m-r-xs\">\n\t\t\t\t\t\t\t\t{{ $lang.buttons.nextTime }}\n\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t<span class=\"text\">{{ job.next }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<el-row class=\"text-center m-t-md\">\n\t\t\t\t\t\t\t<el-col :span=\"12\">\n\t\t\t\t\t\t\t\t<h1 class=\"number\">{{ executedJobs(job) }}</h1>\n\t\t\t\t\t\t\t\t<small> {{ $lang.descriptions.executedJobs }}</small>\n\t\t\t\t\t\t\t</el-col>\n\t\t\t\t\t\t\t<el-col :span=\"12\">\n\t\t\t\t\t\t\t\t<h1 class=\"number\">{{ errorJobs(job) }}</h1>\n\t\t\t\t\t\t\t\t<small> {{ $lang.descriptions.errorJobs }}</small>\n\t\t\t\t\t\t\t</el-col>\n\t\t\t\t\t\t</el-row>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</el-col>\n\t\t</el-row>\n\t</div>\n</template>\n\n<script>\n\timport PanelTitle from '../../components/PanelTitle'\n\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tid: this.$route.params.id,\n\t\t\t\tjobs: [],\n\t\t\t\ttask: null,\n\t\t\t\tloadingJob: false,\n\t\t\t}\n\t\t},\n\t\tcomputed: {},\n\t\tmounted() {\n\t\t\tsetInterval(() => {\n\t\t\t\tthis.getJobsData()\n\t\t\t}, 2000)\n\t\t\tthis.getTaskData()\n\t\t},\n\t\tmethods: {\n\t\t\tgetJobsData() {\n\t\t\t\tthis.$http.get(this.format(this.$store.state.url.task.status, {\n\t\t\t\t\tid: this.id\n\t\t\t\t})).then(({data: {data: data}}) => {\n\t\t\t\t\tthis.jobs = data\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$message.error(this.$store.getters.$lang.messages.loadError)\n\t\t\t\t})\n\t\t\t},\n\t\t\tgetTaskData() {\n\t\t\t\tif (this.id) {\n\t\t\t\t\tthis.$http.get(this.format(this.$store.state.url.task.info, {\n\t\t\t\t\t\tid: this.id\n\t\t\t\t\t})).then(({data: {data: data}}) => {\n\t\t\t\t\t\tthis.task = data\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\t\tthis.$message.error(this.$store.getters.$lang.messages.loadError)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\texecutedJobs(job) {\n\t\t\t\tlet count = 0\n\t\t\t\tjob.executions.forEach((execution) => {\n\t\t\t\t\tif (execution.fields.status === 'Started execution') {\n\t\t\t\t\t\tcount += 1\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn count\n\t\t\t},\n\t\t\terrorJobs(job) {\n\t\t\t\tlet count = 0\n\t\t\t\tjob.executions.forEach((execution) => {\n\t\t\t\t\tif (execution.fields.status === 'Error!') {\n\t\t\t\t\t\tcount += 1\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn count\n\t\t\t}\n\t\t},\n\t\tcomponents: {\n\t\t\tPanelTitle,\n\t\t},\n\t}\n</script>\n\n<style scoped>\n\th1.number {\n\t\tfont-weight: 100;\n\t\tmargin: 10px 0;\n\t\tmargin-top: 0;\n\t}\n\n\t.text {\n\t\tfont-size: 14px;\n\t\tcolor: #535351;\n\t}\n</style>\n","\nh1.number[data-v-3770a426] {\n\tfont-weight: 100;\n\tmargin: 10px 0;\n\tmargin-top: 0;\n}\n.text[data-v-3770a426] {\n\tfont-size: 14px;\n\tcolor: #535351;\n}\n\n\n/*# sourceMappingURL=chunk-73c4777b.f54044c9.css.map*/"]}